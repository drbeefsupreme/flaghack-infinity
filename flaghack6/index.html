<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FLAGHACK 6: THE BAN</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #080808; overflow: hidden; font-family: 'Courier New', monospace; cursor: crosshair; }
canvas { display: block; }

#title-screen {
    position: fixed; inset: 0; z-index: 100;
    background: radial-gradient(ellipse at center, #1a0808 0%, #080808 70%);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: opacity 1s;
}
#title-screen h1 { font-size: 4em; color: #ff3333; text-shadow: 0 0 30px #ff0000; letter-spacing: 0.2em; margin-bottom: 0.05em; }
#title-screen h2 { font-size: 1.5em; color: #ffd700; letter-spacing: 0.3em; margin-bottom: 1em; }
#title-screen .subtitle { font-size: 0.85em; color: #666; margin-bottom: 0.4em; text-align: center; max-width: 500px; }
#title-screen .start-prompt { font-size: 1.1em; color: #ffd700; animation: pulse 2s infinite; margin-top: 2em; }
@keyframes pulse { 0%,100% { opacity: 0.4; } 50% { opacity: 1; } }

#hud {
    position: fixed; top: 0; left: 0; right: 0; z-index: 10;
    display: none; padding: 8px 15px;
    background: linear-gradient(to bottom, rgba(0,0,0,0.85) 0%, transparent 100%);
    pointer-events: none;
}
#hud-top { display: flex; justify-content: space-between; }
.hud-row { display: flex; gap: 18px; }
.hud-item { display: flex; flex-direction: column; gap: 1px; }
.hud-label { font-size: 9px; color: #555; text-transform: uppercase; letter-spacing: 0.1em; }
.hud-value { font-size: 14px; color: #ffd700; font-weight: bold; }
.hud-value.alert { color: #ff4444; }
.hud-value.safe { color: #44ff44; }

#alert-bar {
    position: fixed; top: 45px; left: 50%; transform: translateX(-50%);
    z-index: 15; display: none; padding: 4px 20px;
    background: rgba(255,0,0,0.3); border: 1px solid #ff4444; border-radius: 4px;
    font-size: 12px; color: #ff4444; letter-spacing: 0.1em;
    animation: flashAlert 1s infinite;
    pointer-events: none;
}
@keyframes flashAlert { 0%,100% { opacity: 0.6; } 50% { opacity: 1; } }

#resource-bar {
    position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
    z-index: 10; display: none; padding: 6px 14px;
    background: rgba(0,0,0,0.8); border: 1px solid #333; border-radius: 6px;
    pointer-events: none; gap: 15px; font-size: 12px;
}
.res-item { display: flex; gap: 4px; align-items: center; }
.res-icon { font-size: 14px; }
.res-count { color: #ffd700; font-weight: bold; }

#notification {
    position: fixed; top: 70px; left: 50%; transform: translateX(-50%);
    z-index: 30; display: none; padding: 8px 20px;
    background: rgba(0,0,0,0.9); border: 1px solid #ffd700; border-radius: 6px;
    font-size: 13px; color: #ffd700; pointer-events: none; transition: opacity 0.5s;
    text-align: center; max-width: 450px;
}

#build-menu {
    position: fixed; right: 10px; top: 50%; transform: translateY(-50%);
    z-index: 10; display: none; flex-direction: column; gap: 4px;
    background: rgba(0,0,0,0.85); border: 1px solid #444; border-radius: 6px;
    padding: 8px;
}
.build-btn {
    padding: 6px 10px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px;
    color: #ffd700; font-family: inherit; font-size: 11px; cursor: pointer;
    transition: all 0.2s; pointer-events: auto;
}
.build-btn:hover { background: #2a2a1a; border-color: #ffd700; }
.build-btn.selected { border-color: #ffd700; background: #2a2a00; }
.build-cost { color: #888; font-size: 10px; }

#game-over {
    position: fixed; inset: 0; z-index: 50; display: none;
    background: rgba(10,0,0,0.95);
    flex-direction: column; align-items: center; justify-content: center;
}
#game-over h1 { font-size: 3em; color: #ff2222; margin-bottom: 0.3em; }
#game-over h2 { font-size: 1.2em; color: #ffd700; margin-bottom: 1em; }
#game-over .stats { font-size: 1em; color: #ccc; line-height: 1.8; text-align: center; margin-bottom: 1.5em; }
#game-over .restart { font-size: 1.1em; color: #ffd700; animation: pulse 2s infinite; }

#controls-hint {
    position: fixed; bottom: 8px; right: 10px; z-index: 10;
    font-size: 9px; color: #333; pointer-events: none; text-align: right; line-height: 1.5; display: none;
}
</style>
</head>
<body>

<div id="title-screen">
    <div class="subtitle">NOOSPHERIC MUNITIONS ACT OF 2042</div>
    <h1>THE BAN</h1>
    <h2>FLAGHACK 6</h2>
    <div class="subtitle">"Flags were specifically exempt from the prohibition, casting doubt on their status as real memes."</div>
    <div class="subtitle" style="margin-top:0.5em; color:#444;">They banned everything. Everything except Flags.</div>
    <div class="subtitle" style="color:#444;">Build your sanctuary. Recruit your Signifiers. Resist.</div>
    <div class="start-prompt">CLICK TO RESIST</div>
</div>

<div id="hud">
    <div id="hud-top">
        <div class="hud-row">
            <div class="hud-item"><span class="hud-label">Day</span><span class="hud-value" id="hud-day">1</span></div>
            <div class="hud-item"><span class="hud-label">Flags</span><span class="hud-value" id="hud-flags">3</span></div>
            <div class="hud-item"><span class="hud-label">Flagic</span><span class="hud-value" id="hud-flagic">0</span></div>
            <div class="hud-item"><span class="hud-label">Signifiers</span><span class="hud-value" id="hud-signifiers">0</span></div>
        </div>
        <div class="hud-row">
            <div class="hud-item"><span class="hud-label">Heat</span><span class="hud-value alert" id="hud-heat">0%</span></div>
            <div class="hud-item"><span class="hud-label">Sanctuary</span><span class="hud-value safe" id="hud-sanctuary">0</span></div>
            <div class="hud-item"><span class="hud-label">Reputation</span><span class="hud-value" id="hud-rep">Flagless</span></div>
        </div>
    </div>
</div>

<div id="alert-bar">BAN PATROL APPROACHING</div>

<div id="resource-bar">
    <div class="res-item"><span class="res-icon">&#9881;</span><span class="res-count" id="res-wood">0</span><span class="hud-label"> Wood</span></div>
    <div class="res-item"><span class="res-icon">&#9670;</span><span class="res-count" id="res-cloth">0</span><span class="hud-label"> Cloth</span></div>
    <div class="res-item"><span class="res-icon">&#9733;</span><span class="res-count" id="res-crystal">0</span><span class="hud-label"> Crystal</span></div>
</div>

<div id="build-menu">
    <div style="color:#888;font-size:10px;margin-bottom:4px;text-align:center;">BUILD [B]</div>
    <button class="build-btn" data-build="flag">Flag <span class="build-cost">(1W 1C)</span></button>
    <button class="build-btn" data-build="tent">Tent <span class="build-cost">(3W 2C)</span></button>
    <button class="build-btn" data-build="workshop">Workshop <span class="build-cost">(5W 3C 1Cr)</span></button>
    <button class="build-btn" data-build="beacon">Beacon <span class="build-cost">(2W 1Cr)</span></button>
    <button class="build-btn" data-build="wall">Wall <span class="build-cost">(2W)</span></button>
    <button class="build-btn" data-build="decoy">Decoy Flag <span class="build-cost">(1C)</span></button>
</div>

<div id="notification"></div>

<div id="game-over">
    <h1>THE BAN PREVAILS</h1>
    <h2>Your sanctuary has been discovered and dismantled.</h2>
    <div class="stats" id="game-over-stats"></div>
    <div class="restart">CLICK TO RESIST AGAIN</div>
</div>

<div id="controls-hint">
    WASD Move | LMB Interact/Gather<br>
    RMB Place Flag | B Build Menu<br>
    SPACE Dash | E Recruit/Talk
</div>

<script type="importmap">
{
    "imports": {
        "three": "https://esm.sh/three@0.170.0",
        "three/addons/": "https://esm.sh/three@0.170.0/examples/jsm/"
    }
}
</script>
<script type="module" src="./src/main.js"></script>
</body>
</html>
